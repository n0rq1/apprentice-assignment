name: Workflow for Liatrio Take Home Assignment 

on:
  push:
    branches: ["main", "TestGHA"]
    tags:
      - "v*.*.*"

jobs: 

  build-test-push:

    permissions:
      contents: 'read'
      id-token: 'write'

    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Get latest tag
        id: version
        run: |
          VERSION=$(git tag --sort=-creatordate | head -n 1)
          echo "VERSION=$VERSION" >> $GITHUB_ENV

      - name: Debug Version
        run: echo "Latest tag is ${{ env.VERSION }}"
